
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>choonkeat on programming & software  | The Devel!</title>

	<meta name="author" content="choonkeat">

<meta name="description" content="
		 I&#8217;m so glad I hadn&#8217;t bought the vacuum robot yet&#8230; b&#8217;cos a new-comer &quot;vacuums, washes and dries in a single pass&qu..."> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="http://feeds.feedburner.com/choonkeat" rel="alternate" title="The Devel!" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href="/stylesheets/application.css" media="screen, projection" rel="stylesheet" type="text/css">
<script src="/javascripts/application.js"></script>

</head>



<body>
	<header id="header" class="inner"><h1><a href="/">The Devel!</a></h1>
<span class="tagline">choonkeat on programming & software</span>
<nav id="main-nav"><ul>
	<li><a href="/weblog/chew-choon-keat.html">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/weblog/chew-choon-keat.html">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/not-doing-house.html">
			
				Not Doing Housework</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-24T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p> I&#8217;m so glad I hadn&#8217;t bought the <a href="http://www.sharperimage.com/us/en/catalog/productview.jhtml?sku=SI727RED">vacuum robot</a> yet&#8230; b&#8217;cos a new-comer &quot;vacuums, washes and dries in a single pass&quot; (reminds me of how years ago, desktop router prices fell $100 and pack more features a week after I bought mine). Kewl! Checkout <a href="http://www.irobot.com/consumer/scooba_sneak_preview.cfm">Scooba&#8217;s sneak peak page</a> and the demo (very short) videos.<br /><br />Hmm, what&#8217;s left? Wash windows, laundry (wash, dry, folder, hang in closet), dust shelves, plates, kitchen (include oily walls).. If things turns out right.. by the time I have to do housework.. I won&#8217;t have to!<br /><br />Ya, I&#8217;m a youngest-child-good-life-spoilt-brat.  (&#8211;&quot;)<br /><br /></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/howto-provide-g.html">
			
				HOWTO provide GUI feedback when a Job is completed</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-19T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>The Job framework is almost &quot;The Framework&quot; to use when executing any lengthy procedures inside Eclipse environment. <br />
I&#8217;ve yet to encounter a scenario where <span style="font-family: courier new,courier,monospace;">IRunnableContext.run</span> <br />
(my original solace) can&#8217;t be replaced by a Job well done (ya, corny).<br /><br />So, back to the main question: How do you <br />
respond &quot;Job done!&quot; to the user after your Job has finished execution? Simple, create an implementation of </p>

<p>IJobChangeListener</span>. And, at the <span style="font-weight: bold; font-family: courier new,courier,monospace;">public void done(IJobChangeEvent event)</span> do:<br />
<br /><br />
<br /><br />
<pre><br />
  // note: you'll have to call addJobChangeListener() before<br />
  // schedule() for this to take effect..<br />
  if (event.getResult().isOK()) {<br />
    Display.getDefault().asyncExec(new Runnable() {<br />
      public void run() {<br />
        IAction action = new Action(&quot;Job Done&quot;) {<br />
          public void run() {<br />
            <b>MessageDialog.openInformation(getShell(), <br />
              &quot;Title&quot;, <br />
              &quot;Job done!&quot;);</b><br />
          }<br />
        };<br />
        action.run();<br />
      }<br />
    });<br />
  }<br />
</pre><br />
<br /><br />
<br /><br />
Note that the <span style="font-weight: bold;">bold</span> section is the real meat of what you&#8217;d really wanted to do. But without doing all these Display&#8230;IAction..run thing, you&#8217;ll definitely get the nasty  <span style="font-family: courier new,courier,monospace;">org.eclipse.swt.SWTException: Invalid thread access</span> <br /><br />Read more <a href="http://www.eclipse.org/articles/Article-Concurrency/jobs-api.html">here</a>.<br /><br /><br /></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/so-many-things-.html">
			
				So many things.. so little time&#8230;</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-18T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>Arghhh!! 1 week after launch of Backpack, they released <a href="http://feeds.feedburner.com/37signals/beMH?m=333">Backpack mobile</a>.. 2nd week (now) its <a href="http://www.backpackit.com/api/">APIs</a>! Now I reaaaaally have to find time play with my backpack account. Dammit! Checkout <a href="http://radar.oreilly.com/archives/2005/05/new_way_of_doin.html">rael&#8217;s ideas on mixing Backpack with Amazon</a>.. <br /><br />And then, there&#8217;s PS3 [checkout the <a href="http://www.1up.com/do/newsStory?cId=3140617">video</a>].. there&#8217;s <a href="http://tomorrow.sg/archives/2005/05/17/radio-controlled_car_drift.html">kewl kewl RC cars</a> (btw, these SG Drifters can <a href="http://www.makezine.com/blog/archive/2005/05/rc_cars_on_the.html">help SAF</a> ya know?).. and <a href="http://www.boingboing.net/2005/05/17/star_wars_last_suppe.html">Star Wars</a>.. and I gotta blog about <a href="http://nana.yanime.org/blog/2">Love</a>&#8230; and I&#8217;m running out of <a href="http://rails.yanime.org/rssfwd/">server diskspace</a>&#8230; <br /><br />I think there&#8217;s some secret conspiracy to make so many things happen on my birthday week so as to discourage me in getting out of my room to celebrate. Grrrr! <br /><br />PS: Caught any hints yet?<br /><br /></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/rssfwd-was-down.html">
			
				Rssfwd was Down</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-18T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>Sorry rssfwd users. Was just talking about running out of space (sheesh!) and the database just cronked out a while ago.. lucky thing is, its just the cache table.. but it also mean you may miss updates from your feeds of the past hour or so. Updating the cache table now.. so that you guys won&#8217;t get spammed from re-sends.. </p><p>Very very sorry about that. I&#8217;m already looking to upgrade the server. Please bear with me til then.</p><p>Thanks</p><p />


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/yahoo-music-eng.html">
			
				Yahoo Music Engine? [updated]</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-12T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>Update: Eww, buck-chew-tak stamp. &quot;per Month&quot; i also read as &quot;per Year&quot;. Typo corrected.<br /><br />Sounds like interesting stuff, based on Napster-To-Go model.. but <a href="http://music.yahoo.com/musicengine/">YME</a> is only USD $5 for a <span style="font-weight: bold;"><span style="text-decoration: line-through;">YEAR</span> </span>month subscription. How many <a href="http://blog.kordix.com/marv/archives/000400.html">CDs can you rip now</a> [if it comes out of a speaker, it can go into a mic and onto my harddisk]? Sounds like a good deal.<br /><br />Yay, price war! $0.99 a song! $5 a <span style="text-decoration: line-through;">year</span> month! $10 for your lifetime, your children&#8217;s lifetime and their children&#8217;s lifetime!<br /> <br /></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/writing-defensi.html">
			
				Writing Defensively: Making Wrong Code Look Wrong</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-12T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>The latest article by Joel is a worthy read. <a href="http://www.joelonsoftware.com/articles/Wrong.html"></a>If anything is lost on you, try this simplistic illustration:<br /> <div style="margin-left: 40px;"><br /> 1. <a href="http://dictionary.reference.com/search?q=sun">[A planet]</a> rises from the <a href="http://dictionary.reference.com/search?q=east">[a direction]</a>.<br /> 2. The sky is 834958243<br /> </div> <br /> How easy can you tell if there&#8217;s a mistake? Writing to allow your code to be check-able in 1-look.<br /> <br /> Also, at long last! The mystery of <span style="font-style: italic;">who-the-big-f*king-idiot-invented-the-Hungarian-Notation-for?</span> is solved. What a big, embarrassing mistake (!) we were taught in schools by straight-faced lecturers saying its <span style="font-style: italic;">A Good Thing..</span> &#33510;&#21475;&#33391;&#33647;.. my foot! And for some poorer souls were even forced to practise in work&#8230; <br /> <br /> Please mis-lead no more. Schools, if you can&#8217;t <a href="/articles/2004/11/22/pet-peeves-and-java">get the first one right</a>, try to get this one right, mmkay?<br /> <br /> <div style="margin-left: 40px;">&quot;..Somebody, somewhere, read Simonyi s paper, where he used the word  type,  and thought he meant type, like class, like in a type system, like the type checking that the compiler does. He did not. He explained very carefully exactly what he meant by the word  type,  but it didn t help. The damage was done&#8230;&quot;<br />- [full article at <a href="http://www.joelonsoftware.com/articles/Wrong.html">Making Wrong Code Look Wrong, by Joel Spolsky</a>]<br /> </div> <br /> Now, time to unlearn, relearn&#8230;<br /><br /></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/david-got-his-w.html">
			
				David got his wish. Kind of.</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-12T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>Looks like DHH got <a href="http://www.loudthinking.com/arc/000454.html">his wish</a>, or partly at least, since <a href="http://news.com.com/Google+puts+brakes+on+Accelerator/2100-1032_3-5702969.html?part=rss&tag=5702969&subj=news">Google pulled the plug on their Web Accelerator</a>. With the impressively consistent bad PR from Google these days, *sigh*&#8230;<br /></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/amazing-self-re.html">
			
				Amazing Self-Replication Robots</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-12T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>Checkout the videos [12mb download]! Very eerie feeling that I can&#8217;t make out how I feel&#8230; they are alive.. and like a millipede that broke off and eww&#8230; See for yourself: <a href="http://www.mae.cornell.edu/ccsl/research/selfrep/">Link</a><br /><br />Reminds me of (recently saw the DVD) Aliens Vs Predator&#8217;s self-configuring pyramid.. <br /><br />But, my 2 cents say &quot;replication&quot; is a misleading word of choice (maybe only to hype things up).. &#8216;cos that made me think it could somehow produced itself out of itself&#8230; but maybe that&#8217;s just me.<br /><br /><br /><br /></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/why-orgeclipsej.html">
			
				Why org.eclipse.jdt.launching.DEFAULT_CLASSPATH is always TRUE? And more on launching Ant tasks programmatically&#8230;</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-09T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>DEFAULT_CLASSPATH will matter to you if you&#8217;re trying to launch a task using <span style="font-family: courier new,courier,monospace;">ILaunchConfigurationWorkingCopy</span> using a separate JRE.<br /><br />To launch in a separate JVM, you&#8217;ll have to first, get a JVM.. <br /><br />
<pre></p>

<p>  ILaunchManager launchManager = DebugPlugin.getDefault().getLaunchManager();<br />
  ILaunchConfigurationType type = launchManager.getLaunchConfigurationType(IAntLaunchConfigurationConstants.ID_ANT_LAUNCH_CONFIGURATION_TYPE);<br />
  ILaunchConfigurationWorkingCopy workingCopy = type.newInstance(null, &quot;Execute Ant Target&quot;);<br />
  IProject project = ...;<br />
  IVMInstall vm = JavaRuntime.getVMInstall((IJavaProject) project);<br />
  workingCopy.setAttribute( IJavaLaunchConfigurationConstants.ATTR_VM_INSTALL_TYPE, vm.getVMInstallType().getId());<br />
  workingCopy.setAttribute(IJavaLaunchConfigurationConstants.ATTR_VM_INSTALL_NAME, vm.getName());<br />
  // ... more codes.. <br />
  workingCopy.launch(ILaunchManager.RUN_MODE, new NullProgressMonitor()); <br />
  // now this runs in separate JVM as ur Eclipse</p>

</pre>
Now, for my case I need to append quite a bit of classpath for my ant tasks to run, when NOT running as separate JVM, its relatively easy.. just modify the classpath set in the AntCorePlugin:<br />
<pre>

<p>  IAntClasspathEntry [] newUrls = ...;<br />
  AntCorePlugin.getPlugin().getPreferences().setAdditionalClasspathEntries(newUrls);<br />
  // and when u're done launching/launch has terminated.. just remember to reset it back<br />
  // its impolite to make permanent change to user's preference without asking you know..</p>

</pre>
However, the above method of modifying classpath doesn&#8217;t work when you&#8217;re intending to run as a separate JRE, we&#8217;ll have to do with something called <span style="font-family: courier new,courier,monospace;">IMemento</span>:<br />
<pre>

<p>  List mementoList = new ArrayList();<br />
  mementoList.add((new AntHomeClasspathEntry()).getMemento());<br />
  mementoList.add((new ContributedClasspathEntriesEntry()).getMemento());<br />
  mementoList.add(JavaRuntime.newArchiveRuntimeClasspathEntry(new Path(workingDir.getAbsolutePath())).getMemento());<br />
  // and more custom classpaths.. <br />
  workingCopy.setAttribute(IJavaLaunchConfigurationConstants.ATTR_CLASSPATH, mementoList);</p>

</pre>
But what I find is, that there&#8217;s this attribute <span style="font-family: courier new,courier,monospace;">ATTR_DEFAULT_CLASSPATH</span> that is always set to true. And when its true, the classpath that I&#8217;ve painstakingly assembled above doesn&#8217;t apply, its value is always <span style="font-family: courier new,courier,monospace;">true</span> even if I explicitly set:<br />
<pre>

<p>  workingCopy.setAttribute(IJavaLaunchConfigurationConstants.ATTR_DEFAULT_CLASSPATH, false);<br />
  workingCopy.launch(ILaunchManager.RUN_MODE, new NullProgressMonitor());</p>

</pre>
Frustrating. <br /><br />Its only after debugging into Eclipse&#8217;s plugin&#8217;s source code (yippie! open source!) that I realise that somewhere inside <span style="font-family: courier new,courier,monospace;">workingCopy.launch</span> itself, there&#8217;s a call to <span style="font-family: courier new,courier,monospace;">AntUtil.migrateToNewClasspathFormat()</span> that effectively screws up that attribute. I haven&#8217;t dwell into more details.. so my current fix is simple, I preempt:<br />

<pre>

<p>  AntUtil.migrateToNewClasspathFormat(workingCopy);<br />
  workingCopy.setAttribute(IJavaLaunchConfigurationConstants.ATTR_DEFAULT_CLASSPATH, false);<br />
  workingCopy.launch(ILaunchManager.RUN_MODE, new NullProgressMonitor());</p>

</pre>
Now, the value remains as <span style="font-family: courier new,courier,monospace;">false</span> and my custom classpath takes effect.<br /><br />


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/weblog/2005/05/implementing-fe.html">
			
				Implementing Feature Project add-on to an Eclipse Plugin Project</a>
		</h2>
		<div class="meta date">








  


<time datetime="2005-05-09T00:00:00+08:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content">
		<p>I may be ill-informed, but to me implementing a Feature means getting an icon at the Help &gt; About Eclipse Platform dialog. An icon beside the default, blue Eclipse icon. An icon for the developer to click on and bring up yet-another-dialog, listing the plugins my Feature contains.. together with some professional looking details about the whole thing.<br /><br />But, getting that icon to appear apparently isn&#8217;t easy. For a start, I couldn&#8217;t find much (any!) details on the bare minimum stuff I need to specify. Now, before I forget.. I&#8217;ll better write them all down. Prequisites:<br /><br /><ol><li>A plugin project in your workspace that is working fine. (Let&#8217;s call it plugin id org.yanime.plugin)</li><li>Create a Feature Project via File &gt; New &gt; Projects &gt; New Feature Project</li><li>Feature ID: Preferably the same ID as your plugin (org.yanime.plugin)</li><li>Feature Name: anything goes</li><li>Version: anything goes</li><li>Provider Name: I haven&#8217;t investigated, but I&#8217;d assume it should be the same as your intended plugin</li><li>Branding Plugin: Apparently, if your Feature ID != plugin id.. you&#8217;ll have to state your plugin id here. Else, just leave it blank.</li><li>Banner Image: any 32x32 gif image, put at the root folder of your Feature Project</li><li>Go to &quot;Build&quot; tab and make sure your image and feature.xml is included in the binary build.</li><li>Go to &quot;Content&quot; tab and include your plugin (org.yanime.plugin)</li></ol>You&#8217;ve completed your Feature Project. You can now Right Click &gt; Export &gt; Deployable features &gt; &#8230; and have a nifty .zip file to install. But, does it work? No! Who the hell knows you&#8217;ve to add more stuff into your plugin? So now, go back there to your workspace and open up your plugin project..<br /><br /><ol><li>Copy these set of files from other existing plugins (e.g. eclipse/plugins/org.eclipse.jdt_3.0.1)</li><ul><li>about.ini</li><li>about.mapping</li><li>about.properties</li><li>eclipse32.gif</li><li style="font-style: italic;">I forgot, but in case it doesn&#8217;t work, grab welcome.xml and about.html as well.</li></ul><li>Inside about.mapping, there is only 1 effective line, 0=xxxxx, don&#8217;t change the 0=. the xxxxx is what will appear in place of {0} inside about.properties (by default, used for Build id)</li><li>Now, edit your plugin.xml &gt; build (or edit build.properties directly) and make sure these files are all included in your plugin&#8217;s binary build.</li></ol>Only now, then you can truely export your Feature Project.. (it&#8217;ll produce 1 x zip file including your Feature and Plugin project files). The above only includes the bare minimum of getting your own little feature icon appearing on the About dialog of Eclipse. Play around with those files and values and images to customize to your liking.<br /><br />And also, I think as long as the Feature&#8217;s Provider Name is the same, they&#8217;ll share the same icon. Upon clicking that, the list you see is the list of Features under that Provider Name. So, if you have 10 plugins and 1 feature, you&#8217;ll only see 1 listed. If you want all of your plugins to show up with the descriptions and all, you&#8217;ll have to create a Feature for each plugin.<br /><br /><br /></p>


		
		
	</div>

</article>


    <nav id="pagenavi">
        
            <a href="/weblog/page/22/" class="prev">Previous</a>
        
        
            <a href="/weblog/page/24/" class="next">Next</a>
        
    </nav>

</div>
	<footer id="footer" class="inner">&copy; 2016

    choonkeat

</footer>
	<script src="/javascripts/slash.js"></script>
<!-- <script src="/javascripts/hyphenator.js"></script> -->


<script type="text/javascript">
      var disqus_shortname = 'choonkeat';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-1438738-3']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
</html>
