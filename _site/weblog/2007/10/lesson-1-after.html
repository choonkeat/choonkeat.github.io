<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Lesson #1 after using the iPhone: Automatic Orientation | The Devel!</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Lesson #1 after using the iPhone: Automatic Orientation" />
<meta name="author" content="choonkeat" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Remember those days of downloading your photos from your camera, then going through them, one by one... and rotating each picture right-side up until you get drowsy or give up? Such tedious work! Oh, and did you click save after you rotated?" />
<meta property="og:description" content="Remember those days of downloading your photos from your camera, then going through them, one by one... and rotating each picture right-side up until you get drowsy or give up? Such tedious work! Oh, and did you click save after you rotated?" />
<link rel="canonical" href="http://localhost:4000/weblog/2007/10/lesson-1-after.html" />
<meta property="og:url" content="http://localhost:4000/weblog/2007/10/lesson-1-after.html" />
<meta property="og:site_name" content="The Devel!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2007-10-16T00:00:00+08:00" />
<script type="application/ld+json">
{"headline":"Lesson #1 after using the iPhone: Automatic Orientation","dateModified":"2007-10-16T00:00:00+08:00","datePublished":"2007-10-16T00:00:00+08:00","author":{"@type":"Person","name":"choonkeat"},"description":"Remember those days of downloading your photos from your camera, then going through them, one by one... and rotating each picture right-side up until you get drowsy or give up? Such tedious work! Oh, and did you click save after you rotated?","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/weblog/2007/10/lesson-1-after.html"},"url":"http://localhost:4000/weblog/2007/10/lesson-1-after.html","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="The Devel!" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">The Devel!</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Lesson #1 after using the iPhone: Automatic Orientation</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2007-10-16T00:00:00+08:00" itemprop="datePublished">Oct 16, 2007
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Remember those days of downloading your photos from your camera, then going through them, one by one... and rotating each picture right-side up until you get drowsy or give up? Such tedious work! Oh, and did you click save after you rotated?</p>

<p>Apparently, pictures taken from the iPhone and many new digital cameras (though none from <a href="http://www.google.com/search?esrch=BetaShortcuts&amp;q=is%20the%20World's%20largest%20camera%20manufacturer">the world's largest camera manufacturer</a>) comes embedded with orientation information! To put it simply, it means that these digital photos already know if they are landscape or portrait - How cool is that?</p>

<p>Unfortunately, not all software makes use of this piece of information to save you the labor. And <a href="http://flickr.com/photos/choonkeat/tags/orientation/">this includes even cool sites like Flickr</a> :-( What a shame. And it doesn't help that most image upload/resize/crop HOWTOs doesn't talk about it either.</p>

<p><a href="http://sharedcopy.com/">SharedCopy</a> is cooler than that. Though imaging is not our forte, and its just done for your little profile picture, things are set up such that your profile picture will be right-side up :-D And now, with the help of some monkey-patching, your Rails/Ruby-powered website can be as cool too!</p>

<p><a href="http://rmagick.rubyforge.org/">RMagick</a> users, simply include the code below (e.g. append to config/environment.rb):</p>

<pre><span style="color: #000000;">require</span> <span style="color: #6a5acd;">'</span><span style="color: #dd00dd;">RMagick</span><span style="color: #6a5acd;">'</span> <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">unless</span></span> <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">defined?</span></span><span style="color: #6a5acd;">(</span><span style="color: #008b8b;">Magick</span><span style="color: #6a5acd;">)</span><br /><span style="color: #008b8b;">Magick</span><span style="color: #6a5acd;">::</span><span style="color: #008b8b;">Image</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">class_eval</span> <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">do</span></span><br />&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">class </span></span><span style="color: #6a5acd;">&lt;&lt;</span> <span style="color: #008b8b;">self</span><br />&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">def </span></span><span style="color: #008b8b;">read_with_auto_upright</span><span style="color: #6a5acd;">(*</span><span style="color: #000000;">args</span><span style="color: #6a5acd;">,</span> <span style="color: #6a5acd;">&amp;</span><span style="color: #000000;">block</span><span style="color: #6a5acd;">)</span><br />&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #008b8b;">self</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">read_without_auto_upright</span><span style="color: #6a5acd;">(*</span><span style="color: #000000;">args</span><span style="color: #6a5acd;">,</span> <span style="color: #6a5acd;">&amp;</span><span style="color: #000000;">block</span><span style="color: #6a5acd;">).</span><span style="color: #000000;">collect</span> <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">do</span></span> <span style="color: #6a5acd;">|</span><span style="color: #000000;">img</span><span style="color: #6a5acd;">|</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">begin</span></span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #0000ff;"># if there's nothing to rotate, auto_orient! will return nil</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #000000;">img</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">auto_orient!</span> <span style="color: #6a5acd;">||</span> <span style="color: #000000;">img</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">rescue</span></span> <span style="color: #008b8b;">NotImplementedError</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #0000ff;"># Older versions of ImageMagick has no auto_orient!</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">case</span></span> <span style="color: #000000;">img</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">get_exif_by_entry</span><span style="color: #6a5acd;">(&quot;</span><span style="color: #dd00dd;">Orientation</span><span style="color: #6a5acd;">&quot;)</span> <span style="color: #6a5acd;">&amp;&amp;</span> <span style="color: #000000;">img</span><span style="color: #6a5acd;">[&quot;</span><span style="color: #dd00dd;">EXIF:Orientation</span><span style="color: #6a5acd;">&quot;]</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #0000ff;"># img[&quot;EXIF:Orientation&quot;] might not be ready until get_exif_by_entry() is called</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">when</span></span> <span style="color: #6a5acd;">&quot;</span><span style="color: #dd00dd;">6</span><span style="color: #6a5acd;">&quot;</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #0000ff;"># Magick::RightTopOrientation</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #000000;">img</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">rotate!</span><span style="color: #6a5acd;">(</span><span style="color: #dd00dd;">90</span><span style="color: #6a5acd;">)</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #000000;">img</span><span style="color: #6a5acd;">[&quot;</span><span style="color: #dd00dd;">EXIF:Orientation</span><span style="color: #6a5acd;">&quot;]</span> <span style="color: #6a5acd;">=</span> <span style="color: #6a5acd;">&quot;</span><span style="color: #dd00dd;">1</span><span style="color: #6a5acd;">&quot;</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">when</span></span> <span style="color: #6a5acd;">&quot;</span><span style="color: #dd00dd;">3</span><span style="color: #6a5acd;">&quot;</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #0000ff;"># Magick::BottomRightOrientation</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #000000;">img</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">rotate!</span><span style="color: #6a5acd;">(</span><span style="color: #dd00dd;">180</span><span style="color: #6a5acd;">)</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #000000;">img</span><span style="color: #6a5acd;">[&quot;</span><span style="color: #dd00dd;">EXIF:Orientation</span><span style="color: #6a5acd;">&quot;]</span> <span style="color: #6a5acd;">=</span> <span style="color: #6a5acd;">&quot;</span><span style="color: #dd00dd;">1</span><span style="color: #6a5acd;">&quot;</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">when</span></span> <span style="color: #6a5acd;">&quot;</span><span style="color: #dd00dd;">8</span><span style="color: #6a5acd;">&quot;</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #0000ff;"># Magick::LeftBottomOrientation</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #000000;">img</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">rotate!</span><span style="color: #6a5acd;">(</span><span style="color: #dd00dd;">270</span><span style="color: #6a5acd;">)</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #000000;">img</span><span style="color: #6a5acd;">[&quot;</span><span style="color: #dd00dd;">EXIF:Orientation</span><span style="color: #6a5acd;">&quot;]</span> <span style="color: #6a5acd;">=</span> <span style="color: #6a5acd;">&quot;</span><span style="color: #dd00dd;">1</span><span style="color: #6a5acd;">&quot;</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">end</span></span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #000000;">img</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">end</span></span><br />&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">end</span></span><br />&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">end</span></span><br /><br />&nbsp; &nbsp; <span style="color: #0000ff;"># wrap around RMagick::Image#read method so that </span><br />&nbsp; &nbsp; <span style="color: #0000ff;"># any images loaded in memory are already upright</span><br />&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">alias</span></span> <span style="color: #008b8b;">:read_without_auto_upright</span> <span style="color: #008b8b;">:read</span><br />&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">alias</span></span> <span style="color: #008b8b;">:read</span> <span style="color: #008b8b;">:read_with_auto_upright</span><br />&nbsp; &nbsp; <span class="comment" style="color: rgb(0, 0, 255);"># note: not using alias_method_chain so that this</span><br />&nbsp; &nbsp; <span class="comment" style="color: rgb(0, 0, 255);">#&nbsp; &nbsp;&nbsp; &nbsp; snippet can be used outside of Rails<br /></span>&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">end</span></span><br /><span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">end</span></span>
</pre>

<p><span style="color: #008b8b;">&nbsp;</span>


<a href="http://seattlerb.rubyforge.org/ImageScience.html">ImageScience</a> users, if you trust my C++ code, just place <a href="http://pastie.caboo.se/107610">this patched image_science.rb</a> in your vendor/ directory. Otherwise you can apply this patch manually:</p>

<pre><span style="color: #6a5acd;">---</span> <span style="color: #000000;">lib</span><span style="color: #6a5acd;">/</span><span style="color: #000000;">image_science</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">rb</span>	<span style="color: #dd00dd;">2007</span><span style="color: #6a5acd;">-</span><span style="color: #dd00dd;">10</span><span style="color: #6a5acd;">-</span><span style="color: #dd00dd;">16</span> <span style="color: #dd00dd;">12</span><span style="color: #6a5acd;">:</span><span style="color: #dd00dd;">11</span><span style="color: #6a5acd;">:</span><span style="color: #dd00dd;">08.000000000</span> <span style="color: #6a5acd;">+</span><span style="color: #dd00dd;">0800</span><br /><span style="color: #6a5acd;">+++</span> <span style="color: #000000;">lib</span><span style="color: #6a5acd;">/</span><span style="color: #000000;">image_science</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">rb</span><span style="color: #6a5acd;">.</span><span style="color: #000000;">new</span>	<span style="color: #dd00dd;">2007</span><span style="color: #6a5acd;">-</span><span style="color: #dd00dd;">10</span><span style="color: #6a5acd;">-</span><span style="color: #dd00dd;">16</span> <span style="color: #dd00dd;">12</span><span style="color: #6a5acd;">:</span><span style="color: #dd00dd;">11</span><span style="color: #6a5acd;">:</span><span style="color: #dd00dd;">01.000000000</span> <span style="color: #6a5acd;">+</span><span style="color: #dd00dd;">0800</span><br /><span style="color: #009900;">@@</span> <span style="color: #6a5acd;">-</span><span style="color: #dd00dd;">150</span><span style="color: #6a5acd;">,</span><span style="color: #dd00dd;">6</span> <span style="color: #6a5acd;">+</span><span style="color: #dd00dd;">150</span><span style="color: #6a5acd;">,</span><span style="color: #dd00dd;">21</span> <span style="color: #009900;">@@</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #008b8b;">VALUE</span> <span style="color: #000000;">result</span> <span style="color: #6a5acd;">=</span> <span style="color: #008b8b;">Qnil</span><span style="color: #6a5acd;">;</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #000000;">int</span> <span style="color: #000000;">flags</span> <span style="color: #6a5acd;">=</span> <span style="color: #000000;">fif</span> <span style="color: #6a5acd;">==</span> <span style="color: #008b8b;">FIF_JPEG</span> <span style="color: #6a5acd;">?</span> <span style="color: #008b8b;">JPEG_ACCURATE</span> <span style="color: #6a5acd;">:</span> <span style="color: #dd00dd;">0</span><span style="color: #6a5acd;">;</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">if</span></span> <span style="color: #6a5acd;">(</span><span style="color: #000000;">bitmap</span> <span style="color: #6a5acd;">=</span> <span style="color: #008b8b;">FreeImage_Load</span><span style="color: #6a5acd;">(</span><span style="color: #000000;">fif</span><span style="color: #6a5acd;">,</span> <span style="color: #000000;">input</span><span style="color: #6a5acd;">,</span> <span style="color: #000000;">flags</span><span style="color: #6a5acd;">))</span> <span style="color: #6a5acd;">{</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #008b8b;">FITAG</span> <span style="color: #6a5acd;">*</span><span style="color: #000000;">tagValue</span> <span style="color: #6a5acd;">=</span> <span style="color: #008b8b;">NULL</span><span style="color: #6a5acd;">;</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #008b8b;">FreeImage_GetMetadata</span><span style="color: #6a5acd;">(</span><span style="color: #008b8b;">FIMD_EXIF_MAIN</span><span style="color: #6a5acd;">,</span> <span style="color: #000000;">bitmap</span><span style="color: #6a5acd;">,</span> <span style="color: #6a5acd;">&quot;</span><span style="color: #dd00dd;">Orientation</span><span style="color: #6a5acd;">&quot;,</span> <span style="color: #6a5acd;">&amp;</span><span style="color: #000000;">tagValue</span><span style="color: #6a5acd;">);</span> <br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #000000;">switch</span> <span style="color: #6a5acd;">(</span><span style="color: #000000;">tagValue</span> <span style="color: #6a5acd;">==</span> <span style="color: #008b8b;">NULL</span> <span style="color: #6a5acd;">?</span> <span style="color: #dd00dd;">0</span> <span style="color: #6a5acd;">:</span> <span style="color: #6a5acd;">*((</span><span style="color: #000000;">short</span> <span style="color: #6a5acd;">*)</span> <span style="color: #008b8b;">FreeImage_GetTagValue</span><span style="color: #6a5acd;">(</span><span style="color: #000000;">tagValue</span><span style="color: #6a5acd;">)))</span> <span style="color: #6a5acd;">{</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">case</span></span> <span style="color: #dd00dd;">6</span><span style="color: #6a5acd;">:</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #000000;">bitmap</span> <span style="color: #6a5acd;">=</span> <span style="color: #008b8b;">FreeImage_RotateClassic</span><span style="color: #6a5acd;">(</span><span style="color: #000000;">bitmap</span><span style="color: #6a5acd;">,</span> <span style="color: #dd00dd;">270</span><span style="color: #6a5acd;">);</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">break</span></span><span style="color: #6a5acd;">;</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">case</span></span> <span style="color: #dd00dd;">3</span><span style="color: #6a5acd;">:</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #000000;">bitmap</span> <span style="color: #6a5acd;">=</span> <span style="color: #008b8b;">FreeImage_RotateClassic</span><span style="color: #6a5acd;">(</span><span style="color: #000000;">bitmap</span><span style="color: #6a5acd;">,</span> <span style="color: #dd00dd;">180</span><span style="color: #6a5acd;">);</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">break</span></span><span style="color: #6a5acd;">;</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">case</span></span> <span style="color: #dd00dd;">8</span><span style="color: #6a5acd;">:</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #000000;">bitmap</span> <span style="color: #6a5acd;">=</span> <span style="color: #008b8b;">FreeImage_RotateClassic</span><span style="color: #6a5acd;">(</span><span style="color: #000000;">bitmap</span><span style="color: #6a5acd;">,</span> <span style="color: #dd00dd;">90</span><span style="color: #6a5acd;">);</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">break</span></span><span style="color: #6a5acd;">;</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #000000;">default</span><span style="color: #6a5acd;">:</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">break</span></span><span style="color: #6a5acd;">;</span><br /><span style="color: #6a5acd;">+</span>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #6a5acd;">}</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <span style="color: #000000;">result</span> <span style="color: #6a5acd;">=</span> <span style="color: #000000;">wrap_and_yield</span><span style="color: #6a5acd;">(</span><span style="color: #000000;">bitmap</span><span style="color: #6a5acd;">,</span> <span style="color: #008b8b;">self</span><span style="color: #6a5acd;">,</span> <span style="color: #000000;">fif</span><span style="color: #6a5acd;">);</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #6a5acd;">}</span><br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span style="color: #a52a2a;"><span class="keyword" style="font-weight: bold;">return</span></span> <span style="color: #000000;">result</span><span style="color: #6a5acd;">;</span>
</pre>

<p>What's done here (for both) is that images loaded into memory will be checked for orientation information <em>and have its orientation corrected if possible</em> (otherwise its left untouched). In memory. So all your image operations like &quot;width&quot;, &quot;resize&quot; will be magically &quot;correct&quot;. </p>

<p>No modifications required to your routine. Heck, you can even pretend the whole scenario never existed!</p>


  </div><a class="u-url" href="/weblog/2007/10/lesson-1-after.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">The Devel!</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">choonkeat</li><li><a class="u-email" href="mailto:contactme@choonkeat.com">contactme@choonkeat.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/choonkeat"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">choonkeat</span></a></li><li><a href="https://www.twitter.com/choonkeat"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">choonkeat</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>choonkeat on programming &amp; software</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
