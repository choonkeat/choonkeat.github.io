<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Are you an elephant in a circus too? | The Devel!</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Are you an elephant in a circus too?" />
<meta name="author" content="choonkeat" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Years ago I suffered from insomnia and quite often I&#39;d watch TV Media (commercials) just to pass my time. Not all of them feature excited housewifes holding detergents as you&#39;d think. There was this particular commercial (selling motivation tapes) that was quite memorable: It narrates a story of a boy who saw that the big circus elephant tied to a pole by only a thin rope. &quot;Surely, the elephant could just break its bondage and run away free! Why didn&#39;t she?&quot; the boy asks. The father replied, &quot;You see, when the elephant was little they&#39;d tie her up in huge chains instead of this rope. The baby elephant would try with all her might to escape but in vain. Years of trying (and failing) has etched a strong message into her head: I&#39;m tied here. I can&#39;t get away. So now, the circus only has to use a thin rope. She won&#39;t be trying to go anywhere.&quot; I&#39;m reminded of this story just last night, after realising that I&#39;m like the elephant in the circus. Warning: This is not a shining example of best practices! Do not meddle with production systems in situ! ?”?”æœ‰ç»ƒè¿‡çš„!Problem: I have a command line script doing some processing in a running system, but I wish to experiment a new little feature without impacting the existing system. What are my options?Normally I might prepare another copy of the same system (i.e. staging area), make code modifications and try running the new feature in the staging environment. Once things looks ok, I&#39;ll patch the running system with the new code, and hence roll out the changes. In systems where the setup involves a few external systems, setting up a staging area can be a pain. I was too tired and lazy to prepare a staging area last night. Then, it occurred to me (ok, i&#39;m slow) that with Ruby, I have open classes - something I that do not have in my previous life! I&#39;ve already been bathing in the goodness of open classes while developing Rails apps - when I use the test and plugin framework, etc - but I was still dutifully going through the staging environments way. So I made a copy of the script (the main logic is in the other parts of the system, this script is merely the entry point to kick off the whole process). And in this new script, I added code that redefines the behavior of a class in the system: # import libraries aboveclass FeedTodo def deliver_emails(emails, forced=false) save_to_disk(emails) # instead of sending the mails directly. endend# actual execution below When executing from this particular script, FeedTodo objects would no longer be delivering emails directly because I&#39;ve redefined them to save onto the disk instead. The other parts of the system would happily continue to call FeedTodo#deliver_emails() as usual, invoking the new routine unsuspectingly. Also, the existing system which doesn&#39;t use this new script would not have this modification in their runtime - hence, no impact to production system!In my past life, I would have to change the actual code for FeedTodo class and risk breaking the production system. Blasphemy! Occasionally, when I do, I&#39;d even take pride that I can make such in situ changes backward compatible - feels like Indiana Jones swapping the weighted stone... I&#39;ve realised I&#39;m not chained like I thought I was. I don&#39;t think I&#39;ll ever need to take such stone age risks anymore." />
<meta property="og:description" content="Years ago I suffered from insomnia and quite often I&#39;d watch TV Media (commercials) just to pass my time. Not all of them feature excited housewifes holding detergents as you&#39;d think. There was this particular commercial (selling motivation tapes) that was quite memorable: It narrates a story of a boy who saw that the big circus elephant tied to a pole by only a thin rope. &quot;Surely, the elephant could just break its bondage and run away free! Why didn&#39;t she?&quot; the boy asks. The father replied, &quot;You see, when the elephant was little they&#39;d tie her up in huge chains instead of this rope. The baby elephant would try with all her might to escape but in vain. Years of trying (and failing) has etched a strong message into her head: I&#39;m tied here. I can&#39;t get away. So now, the circus only has to use a thin rope. She won&#39;t be trying to go anywhere.&quot; I&#39;m reminded of this story just last night, after realising that I&#39;m like the elephant in the circus. Warning: This is not a shining example of best practices! Do not meddle with production systems in situ! ?”?”æœ‰ç»ƒè¿‡çš„!Problem: I have a command line script doing some processing in a running system, but I wish to experiment a new little feature without impacting the existing system. What are my options?Normally I might prepare another copy of the same system (i.e. staging area), make code modifications and try running the new feature in the staging environment. Once things looks ok, I&#39;ll patch the running system with the new code, and hence roll out the changes. In systems where the setup involves a few external systems, setting up a staging area can be a pain. I was too tired and lazy to prepare a staging area last night. Then, it occurred to me (ok, i&#39;m slow) that with Ruby, I have open classes - something I that do not have in my previous life! I&#39;ve already been bathing in the goodness of open classes while developing Rails apps - when I use the test and plugin framework, etc - but I was still dutifully going through the staging environments way. So I made a copy of the script (the main logic is in the other parts of the system, this script is merely the entry point to kick off the whole process). And in this new script, I added code that redefines the behavior of a class in the system: # import libraries aboveclass FeedTodo def deliver_emails(emails, forced=false) save_to_disk(emails) # instead of sending the mails directly. endend# actual execution below When executing from this particular script, FeedTodo objects would no longer be delivering emails directly because I&#39;ve redefined them to save onto the disk instead. The other parts of the system would happily continue to call FeedTodo#deliver_emails() as usual, invoking the new routine unsuspectingly. Also, the existing system which doesn&#39;t use this new script would not have this modification in their runtime - hence, no impact to production system!In my past life, I would have to change the actual code for FeedTodo class and risk breaking the production system. Blasphemy! Occasionally, when I do, I&#39;d even take pride that I can make such in situ changes backward compatible - feels like Indiana Jones swapping the weighted stone... I&#39;ve realised I&#39;m not chained like I thought I was. I don&#39;t think I&#39;ll ever need to take such stone age risks anymore." />
<link rel="canonical" href="http://localhost:4000/weblog/2006/07/are-you-an-elep.html" />
<meta property="og:url" content="http://localhost:4000/weblog/2006/07/are-you-an-elep.html" />
<meta property="og:site_name" content="The Devel!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2006-07-01T00:00:00+08:00" />
<script type="application/ld+json">
{"headline":"Are you an elephant in a circus too?","dateModified":"2006-07-01T00:00:00+08:00","datePublished":"2006-07-01T00:00:00+08:00","author":{"@type":"Person","name":"choonkeat"},"description":"Years ago I suffered from insomnia and quite often I&#39;d watch TV Media (commercials) just to pass my time. Not all of them feature excited housewifes holding detergents as you&#39;d think. There was this particular commercial (selling motivation tapes) that was quite memorable: It narrates a story of a boy who saw that the big circus elephant tied to a pole by only a thin rope. &quot;Surely, the elephant could just break its bondage and run away free! Why didn&#39;t she?&quot; the boy asks. The father replied, &quot;You see, when the elephant was little they&#39;d tie her up in huge chains instead of this rope. The baby elephant would try with all her might to escape but in vain. Years of trying (and failing) has etched a strong message into her head: I&#39;m tied here. I can&#39;t get away. So now, the circus only has to use a thin rope. She won&#39;t be trying to go anywhere.&quot; I&#39;m reminded of this story just last night, after realising that I&#39;m like the elephant in the circus. Warning: This is not a shining example of best practices! Do not meddle with production systems in situ! ?”?”æœ‰ç»ƒè¿‡çš„!Problem: I have a command line script doing some processing in a running system, but I wish to experiment a new little feature without impacting the existing system. What are my options?Normally I might prepare another copy of the same system (i.e. staging area), make code modifications and try running the new feature in the staging environment. Once things looks ok, I&#39;ll patch the running system with the new code, and hence roll out the changes. In systems where the setup involves a few external systems, setting up a staging area can be a pain. I was too tired and lazy to prepare a staging area last night. Then, it occurred to me (ok, i&#39;m slow) that with Ruby, I have open classes - something I that do not have in my previous life! I&#39;ve already been bathing in the goodness of open classes while developing Rails apps - when I use the test and plugin framework, etc - but I was still dutifully going through the staging environments way. So I made a copy of the script (the main logic is in the other parts of the system, this script is merely the entry point to kick off the whole process). And in this new script, I added code that redefines the behavior of a class in the system: # import libraries aboveclass FeedTodo def deliver_emails(emails, forced=false) save_to_disk(emails) # instead of sending the mails directly. endend# actual execution below When executing from this particular script, FeedTodo objects would no longer be delivering emails directly because I&#39;ve redefined them to save onto the disk instead. The other parts of the system would happily continue to call FeedTodo#deliver_emails() as usual, invoking the new routine unsuspectingly. Also, the existing system which doesn&#39;t use this new script would not have this modification in their runtime - hence, no impact to production system!In my past life, I would have to change the actual code for FeedTodo class and risk breaking the production system. Blasphemy! Occasionally, when I do, I&#39;d even take pride that I can make such in situ changes backward compatible - feels like Indiana Jones swapping the weighted stone... I&#39;ve realised I&#39;m not chained like I thought I was. I don&#39;t think I&#39;ll ever need to take such stone age risks anymore.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/weblog/2006/07/are-you-an-elep.html"},"url":"http://localhost:4000/weblog/2006/07/are-you-an-elep.html","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="The Devel!" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">The Devel!</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Are you an elephant in a circus too?</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2006-07-01T00:00:00+08:00" itemprop="datePublished">Jul 1, 2006
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Years ago I suffered from insomnia and quite often I'd watch TV Media (commercials) just to pass my time. Not all of them feature excited housewifes holding detergents as you'd think. There was this particular commercial (selling motivation tapes) that was quite memorable: </p><p>It narrates a story of a boy who saw that the big circus elephant tied to a pole by only a thin rope. &quot;Surely, the elephant could just break its bondage and run away free! Why didn't she?&quot; the boy asks. The father replied, &quot;You see, when the elephant was little they'd tie her up in huge chains instead of this rope. The baby elephant would try with all her might to escape but in vain. Years of trying (and failing) has etched a strong message into her head: <em>I'm tied here. I can't get away</em>. So now, the circus only has to use a thin rope. She won't be trying to go anywhere.&quot;</p><p>I'm reminded of this story just last night, after realising that I'm like the elephant in the circus. <br /><br /><font color="#cc3333">Warning</font>: This is not a shining example of <em>best practices</em>! Do not meddle with production systems in situ! ?”?”æœ‰ç»ƒè¿‡çš„!<br /><br />Problem: I have a command line script doing some processing in a running system, but I wish to experiment a new little feature without impacting the existing system. What are my options?<br /><br />Normally I might prepare another copy of the same system (i.e. staging area), make code modifications and try running the new feature in the staging environment. Once things looks ok, I'll patch the running system with the new code, and hence roll out the changes. In systems where the setup involves a few external systems, setting up a staging area can be a pain.<br /></p><p>I was too tired and lazy to prepare a staging area last night. Then, it occurred to me (ok, i'm slow) that with Ruby, I have <a href="http://onestepback.org/articles/10things/page024.html">open classes</a> - something I that do not have in my previous life! I've already been bathing in <a href="http://onestepback.org/articles/depinj/classesareopen.html">the goodness of open classes</a> while developing Rails apps - when I use the test and plugin framework, etc - but I was still dutifully going through the staging environments way.</p><p>So I made a copy of the script (the main logic is in the other parts of the system, this script is merely the entry point to kick off the whole process). And in this new script, I added code that redefines the behavior of a class in the system:</p><pre><em><font color="#9a1900"># import libraries above</font></em><br /><br /><strong><font color="#0000ff">class</font></strong> FeedTodo<br />  <strong><font color="#0000ff">def</font></strong> <strong><font color="#000000">deliver_emails</font></strong><font color="#990000">(</font>emails<font color="#990000">,</font> forced<font color="#990000">=</font><strong><font color="#0000ff">false</font></strong><font color="#990000">)</font><br />    <strong><font color="#000000">save_to_disk</font></strong><font color="#990000">(</font>emails<font color="#990000">)</font> <em><font color="#9a1900"># instead of sending the mails directly.</font></em><br />  <strong><font color="#0000ff">end</font></strong><br /><strong><font color="#0000ff">end</font></strong><br /><br /><em><font color="#9a1900"># actual execution below</font></em> </pre><p>When executing from this particular script, FeedTodo objects would no longer be delivering emails directly because I've redefined them to save onto the disk instead. The other parts of the system would happily continue to call FeedTodo#deliver_emails() as usual, invoking the new routine unsuspectingly. Also, the existing system which doesn't use this new script would not have this modification in their runtime - hence, no impact to production system!<br /><br />In my past life, I would have to change the actual code for FeedTodo class and risk breaking the production system. Blasphemy! Occasionally, when I do, I'd even take pride that I can make such in situ changes backward compatible - feels like Indiana Jones swapping the weighted stone... </p><p>I've realised I'm not chained like I thought I was. I don't think I'll ever need to take such stone age risks anymore.<br /></p>


  </div><a class="u-url" href="/weblog/2006/07/are-you-an-elep.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">The Devel!</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">choonkeat</li><li><a class="u-email" href="mailto:contactme@choonkeat.com">contactme@choonkeat.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/choonkeat"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">choonkeat</span></a></li><li><a href="https://www.twitter.com/choonkeat"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">choonkeat</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>choonkeat on programming &amp; software</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
