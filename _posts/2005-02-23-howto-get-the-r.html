---
layout: post
title: HOWTO get the Real, Physical Path from linkedResources (IPath)
published: true
---
<p>The plugin I'm working on involves environments inside and outside (Ant, via ILauncher) of Eclipse. So, resolving classpath set by IProject is a bit tricky - especially if there's a linkedResource defined in the .project file. The mountains of similar APIs wasted my whole afternoon.. <a href="http://help.eclipse.org/help30/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IResource.html#getLocation()">getLocation</a>(), <a href="http://help.eclipse.org/help30/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IResource.html#getRawLocation()">getRawLocation</a>(), <a href="http://help.eclipse.org/help30/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IFile.html#getFullPath()">getFullPath</a>(), <a href="http://help.eclipse.org/help30/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/IPath.html#toString()">toString</a>(), <a href="http://help.eclipse.org/help30/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/IPath.html#toFile()">toFile</a>(), <a href="http://help.eclipse.org/help30/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/IPath.html#toOSString()">toOSString</a>()... geez, there's so many of them - its all freakin useless! Reminds me of all the zillions of similar <span style="FONT-STYLE: italic">toDate</span> functions I used to have to work with! -<span style="FONT-STYLE: italic">shiver</span>-<br /><br />The actual documentation is found at <a href="http://help.eclipse.org/help30/topic/org.eclipse.platform.doc.isv/guide/resInt_linked.htm">IBM</a>. But <em>bah.. </em>after several hours.. and IPathVariableManager seem impotent, regardless of how I interrogate it. So, my own most trustworthy way of getting the ACTUAL, PHYSICAL path of any IPath is to use <span style="FONT-WEIGHT: bold">IWorkspaceRoot</span>:<br /><br /><div style="MARGIN-LEFT: 40px; FONT-FAMILY: courier new,courier,monospace">IProject proj = ... ; <br />    // you get this urself, if you have <br />    // IResource, try IResource.getProject()<br />IJavaProject javaProject = <br />    JavaCore.create(proj);<br />IClasspathEntry [] resolvedClasspaths = <br />    javaProject.getResolvedClasspath(true);<br />IWorkspaceRoot workspaceRoot = <br />    ResourcesPlugin.getWorkspace().getRoot();<br /><br />for (int i = 0; <br />  resolvedClasspaths != null &amp;&amp; i &lt; resolvedClasspaths.length; <br />  i++) {<br /><br />  IPath path = resolvedClasspaths[i].getPath();<br />  URL url = path.toFile().toURL();<br />  IFile file = workspaceRoot.getFile(path);<br />  if (file != null &amp;&amp; <br />    file.getLocation() != null &amp;&amp; <br />    file.getLocation().toFile() != null) {<br /><br />    url = file.getLocation().toFile().toURL();<br />    // resolves actual, physical path of linkedResource<br /><br />  }<br /><br />  // at this point, URL is definitely usable to create new AntClasspathEntry(url)<br />  // that are resolveable by Launched ant tasks<br />  antClassPathEntry = new AntClasspathEntry(url);<br />}<br /></div><br />There! <br /><br /></p>
